<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Techu Search Server v0.1-beta</title>
  <meta name="description" content="Techu is a REST API implementing Sphinx full-text search engine realtime document indexing and 
  accepting JSON formatted requests. Works along with Redis for buffering and request queueing. 
  Powered by Nginx and the Django Python framework.">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/perfect-scrollbar.css">
  <link href="http://fonts.googleapis.com/css?family=Oswald:400,700,300&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  <script src="js/vendor/modernizr-2.6.2.min.js"></script>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18744331-4']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->
<div id="wrapper">
  <div id="header">
    <div class="content-wrapper"> 
      <ul id="top-menu" class="clearfix">
        <li><a href="#features">FEATURES</a></li>
        <li><a href="#how-it-works">HOW IT WORKS</a></li>
        <li><a href="#installation">INSTALLATION</a></li>
        <li><a href="#examples">EXAMPLES</a></li>
        <li><a href="./docs">DOCS</a></li>
      </ul>    
      <h1 id="logo">TECHU</h1>      
      <h2>RESTFUL REALTIME FULL-TEXT SEARCH</h2>
      <p>
        Techu exposes a RESTful API for realtime indexing and searching with the   
        <a href="http://sphinxsearch.com/" target="_blank">Sphinx full-text search engine</a>.
        <br />We leverage <a href="http://redis.io" target="_blank">Redis</a>, <a href="http://nginx.org/" target="_blank">Nginx</a> 
        and the Python <a href="https://www.djangoproject.com/" target="_blank">Django framework</a> to make searching easier to handle.
      </p>
    </div>
  </div>
  <div id="features" class="clearfix">
    <div class="content-wrapper" class="clearfix">
      <h2>FEATURES</h2>
      <div id="features-container">
        <ul id="feature-list">
          <li><span>Realtime indexing with HTTP calls and JSON data format</span></li>
          <li><span> Redis request buffering and asynchronous statement execution to increase throughput and reduce application latency</span></li>
          <li><span>Batch insert for faster index rebuilding</span></li>
          <li><span>Searching with a simplified JSON interface for specifying filters, sorting and grouping</span></li>
          <li><span>Highlighted excerpts that comply to Sphinx query syntax</span></li>
          <li><span>Manage your index and searchd configuration in a relational MySQL schema</span></li>
          <li><span>High concurrency with the Nginx web server</span></li>
          <li><span>Ability to extend by writing and attaching scripts to the Python Django Web framework</span></li>
          <li><span>Lightweight with simple deployment and installation</span></li> 
        </ul>
      </div>
      <div id="gears"></div>
    </div>
  </div>
  <div id="how-it-works" class="clearfix">    
    <div id="how-it-works-text-container">
      <div id="how-it-works-text" class="clearfix">
        <h2>HOW IT WORKS</h2>
        <p>
        The logic behind Techu is pretty straightforward, as you can see in the flow diagram to the right. 
        Application code sends an HTTP request that corresponds to a specific action. 
        There are 2 major groups of operations; <i>indexing</i> &amp; <i>searching</i>. 
        Indexing involves inserting or deleting a document from the index or modifying attributes or text fields for a document.  
        Searching on the other hand involves performing full-text searches and retrieving highlighted excerpts.  
        </p>
        <p>
        In the current beta version, most request data are passed 
        via a single <code>data</code> parameter with a JSON-formatted value, with some exceptions 
        usually involving requests for the Sphinx configurations handling,
        but in the future <strong>all</strong> requests will be following this protocol for simplicity and uniformity.
        Oh, and yes, now you can keep you Sphinx configurations in order, by storing them in Techu's MySQL DB schema 
        (although this feature can be bypassed also). On each regeneration command Techu will 
        automatically restart the corresponding searchd.             
        </p>
        <p>
        After the application dispatches a request, Nginx receives it and the Django Python Web framework processes the request.
        As you can see in the diagram, indexing operations can be optionally queued for asynchronous execution. 
        In that case, a Redis key is returned as a response and the request 
        is later converted to SphinxQL and sent to Sphinx with the script referred as <i>applier</i> 
        (we probably should find a better name for this). 
        </p>
        <p>If no queueing is required, then the data are converted to SphinxQL 
        statement (or statements if you are batch inserting documents).
        For a searching operation, either full-text search or highlighted excerpts, 
        the response can either originate directly from Redis (cache) or if there is no cache entry, the attribute filters and the query
        will be converted to SphinxQL and retrieved from Sphinx directly.     
        </p>
        <h3>WHY REDIS?</h3>
        <p>Key-value storage, optionally persistent, with very large value length limit (512M) capable of storing a lot of text. 
          Redis list and hash structures are key components of the caching and queueing sub-systems.</p>
        <h3>WHY SPHINXQL?</h3>
        <p>It is faster than the API.</p>
        <h3>WHY NGINX?</h3>
        <p>Faster web server, ensures high concurrency and low latency</p>
        <h3>WHY THESE COMPONENTS OVERALL?</h3>
        <p>Every component is well established software and excels in its area. Also they can be commonly found in most stacks. 
        We wouldn't like to reinvent the wheel, plus there is no need for some exotic configuration for you to learn or setup!</p>    
      </div>
    </div>
    <div id="how-it-works-diagram-container">
      <div id="how-it-works-diagram-wrapper" class="clearfix">
        <div id="how-it-works-diagram">
        </div>
      </div>
    </div>    
  </div>
  <div id="installation" class="clearfix">
    <div class="content-wrapper" class="clearfix">
      <h2>INSTALLATION</h2>
      <h3>UBUNTU PACKAGES</h3>    
      <ul class="command-list">
        <li class="odd">
          <div class="number">1.</div>
          <div class="command">apt-get install python-setuptools build-essential</div>
        </li>
        <li class="even">
          <div class="number">2.</div>
          <div class="command">apt-get install mysql-server mysql-client</div>
        </li>
        <li class="odd">
          <div class="number">3.</div>
          <div class="command">apt-get install redis-server</div>
        </li>
        <li class="even">
          <div class="number">4.</div>
          <div class="command">apt-get install nginx</div>
        </li>
        <li class="odd">
          <div class="number">5.</div>
          <div class="command">apt-get install python-mysqldb python-flup</div>
        </li>
        <li class="even">
          <div class="number">6.</div>
          <div class="command">apt-get install git</div>
        </li>
      </ul>
      <h3>PYTHON PACKAGES (REQUIRED)</h3>    
      <ul class="command-list">
        <li class="odd">
          <div class="number">1.</div>
          <div class="command">easy_install redis</div>
        </li>
        <li class="even">
          <div class="number">2.</div>
          <div class="command">easy_install django</div>
        </li>
        </ul>
      <h3>PYTHON PACKAGES (OPTIONAL)</h3>    
      <ul class="command-list">
        <li class="odd">
          <div class="number">1.</div>
          <div class="command">easy_install hiredis</div>
        </li>
        <li class="even">
          <div class="number">2.</div>
          <div class="command">easy_install beautifulsoup4</div>
        </li>        
      </ul>
      <h3>SPHINX</h3>
      <ul class="command-list">
        <li class="odd">
          <div class="number">1.</div>
          <div class="command">wget http://sphinxsearch.com/files/sphinx-2.1.1-beta.tar.gz</div>
        </li>
        <li class="even">
          <div class="number">2.</div>
          <div class="command">tar -zxvf sphinx-2.1.1-beta.tar.gz</div>
        </li> 
        <li class="odd">
          <div class="number">3.</div>
          <div class="command">cd sphinx-2.1.1-beta</div>
        </li>
        <li class="even">
          <div class="number">4.</div>
          <div class="command">./configure &amp;&amp; make install</div>
        </li>       
      </ul>              
      <h3>CONFIGURATION</h3>
      <ul class="command-list no-margin-bottom">
        <li class="odd">
          <div class="number">1.</div>
          <div class="command">git clone https://github.com/georgepsarakis/techu-search-server.git</div>
        </li>
        <li class="even">
          <div class="number">2.</div>
          <div class="command">vim /etc/nginx/sites-available/techu</div>          
        </li>                                    
      </ul>
      <div class="even" style="position: relative;">
      <div class="note">
        <div class="content">
          <span class="small">Add the domain <b class="small">techu</b> (or <b class="small">techu.local</b>) 
          in your <b class="small">/etc/hosts</b> file, pointing to your server's internal IP, not <b class="small">localhost</b> 
          in order to connect to Sphinx <b class="small">searchd</b> with the MySQL protocol on a specific port.
          </span>
        </div>
      </div>
      <div class="example-result" style="display:block">
<pre>server {
  listen 81;
  server_name techu;
  access_log /var/log/nginx/techu.access.log;
  error_log /var/log/nginx/techu.error.log;

  location / {
    include fastcgi_params;
    fastcgi_pass 127.0.0.1:8080;
    fastcgi_split_path_info ^()(.*)$;
  }
}</pre>
      </div>
      </div>
    </div>
  </div>
  <div id="examples" class="clearfix">
    <div class="content-wrapper" class="clearfix">
      <h2>EXAMPLES</h2>
      <div class="example-box clearfix">        
        <div class="example-box-content">
          <div class="example-title">CREATE A NEW CONFIGURATION</div>
          <ul class="command-list no-margin-bottom">
            <li class="odd">
              <div class="number">1.</div>
              <div class="command">
              curl 'http://techu.local:81/configuration/?name=stackoverflow&description=StackOverflow Posts Indexing Configuration'
              </div>
            </li>
          </ul>
          <div class="odd">
            <div class="example-result">
            <pre>
[
    {
        "fields": {
            "date_inserted": "2013-05-14T19:29:49",
            "description": "StackOverflow Posts Indexing Configuration",
            "hash": "46ee0a09bcbb064b49b224a9e8efd39a",
            "is_active": 1,
            "name": "stackoverflow"
        },
        "model": "techu.configuration",
        "pk": 25
    }
]           </pre>
            </div>
          </div>
        </div>
        <div class="example-toggle plus" title="Show JSON response"></div>
      </div>
    </div>
  </div>
  <div id="whats-next" class="clearfix">
    <div class="content-wrapper" class="clearfix">
      <h2>WHAT'S NEXT</h2>
      <div id="features-container">        
        <ul id="feature-list">
          <li><span>Automatic batching of queued operations. Smart cancelling of overlapping statements.</span></li>
          <li><span>Cache structures to Redis (fields & attributes, index names, connection data)</span></li>
          <li><span>Search &amp; Highlighted Excerpts Cache Invalidations and TTL</span></li>
          <li><span>Explicit index flushing</span></li>
          <li><span>Faceting</span></li>
          <li><span>Scripting</span></li>
          <li><span>Clustering</span></li>
          <li><span>Request Hooks</span></li>
          <li><span>Server Statistics Page (
              Cache hit/miss ratios, 
              Requests/sec
              Requests in queue,
              Executed Statements/sec
            )
              </span></li> 
        </ul>
      </div>
      <div id="arrows"></div>
    </div>
  </div>
  <div id="footer">
    <div class="content-wrapper">
      <div class="pull-left small">
        Techu was the Egyptian god of wisdom and scribe of the Gods
      </div>
      <div class="pull-right small">
        Techu 2013 - <a href="http://opensource.org/licenses/MIT" target="_blank" class="small">MIT Licence</a>
      </div>
    </div>
  </div>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\/script>')</script>

  <script src="js/jquery-plugins/jquery.mousewheel.js"></script>
  <script src="js/jquery-plugins/jquery.perfect-scrollbar.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
